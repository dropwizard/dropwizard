
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Dropwizard Migrations | Dropwizard</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css"/>
    <link rel="stylesheet" href="../_static/dropwizard.css" type="text/css"/>
    <link rel="top" title="Dropwizard" href="../index.html"/>
    <link rel="up" title="User Manual" href="index.html"/>
    <link rel="next" title="Dropwizard Hibernate" href="hibernate.html"/>
    <link rel="prev" title="Dropwizard JDBI3" href="jdbi3.html"/>
    <style lang="text/css">
        #top-bar, #top-bar small, #top-bar a {
            text-shadow: 0px -1px 0px #182127;
            color: #ffffff;
        }

        #top-bar {
            background-color: #363F45;
            background-image: -moz-linear-gradient(top, #545d63, #182127);
            background-image: -ms-linear-gradient(top, #545d63, #182127);
            background-image: -webkit-gradient(linear, 0 0, 0 100%, from(#545d63), to(#182127));
            background-image: -webkit-linear-gradient(top, #545d63, #182127);
            background-image: -o-linear-gradient(top, #545d63, #182127);
            background-image: linear-gradient(top, #545d63, #182127);
            filter: progid:DXImageTransform.Microsoft.gradient(startColorstr = '#545d63', endColorstr = '#182127', GradientType = 0);
            -webkit-border-radius: 0;
            -moz-border-radius: 0;
            border-radius: 0;
        }


        .hero-unit {
            background-image: url("../_static/dropwizard-hat.png") !important;
            background-repeat: no-repeat !important;
            background-position: 30px 50px;
        }

        .hero-unit div.section {
            padding-left: 150px !important;
        }
    </style>
</head>
<body>
    <a href="https://github.com/dropwizard/dropwizard">
        <img style="position: absolute; top: 0; right: 0; border: 0;"
             src="https://s3.amazonaws.com/github/ribbons/forkme_right_orange_ff7600.png"
             alt="Fork me on GitHub"></a>
    <div class="navbar">
        <div class="navbar-inner container-fluid" id="top-bar">
            <header class="row-fluid">
                <h1 class="span12" id="title"><img class="logo" src="../_static/dropwizard-logo.png" alt="Logo"/>
                    <a href="../index.html">Dropwizard</a>
                    <small>Production-ready, out of the box.</small>
                </h1>
            </header>
        </div>
    </div>
    <div class="container-fluid">
        <div class="row-fluid">
            <div class="span3" id="sidebar">
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../getting-started.html">Getting Started</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">User Manual</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="core.html">Dropwizard Core</a></li>
<li class="toctree-l2"><a class="reference internal" href="client.html">Dropwizard Client</a></li>
<li class="toctree-l2"><a class="reference internal" href="jdbi.html">Dropwizard JDBI</a></li>
<li class="toctree-l2"><a class="reference internal" href="jdbi3.html">Dropwizard JDBI3</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Dropwizard Migrations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#configuration">Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="#adding-the-bundle">Adding The Bundle</a></li>
<li class="toctree-l3"><a class="reference internal" href="#defining-migrations">Defining Migrations</a></li>
<li class="toctree-l3"><a class="reference internal" href="#checking-your-database-s-state">Checking Your Database’s State</a></li>
<li class="toctree-l3"><a class="reference internal" href="#dumping-your-schema">Dumping Your Schema</a></li>
<li class="toctree-l3"><a class="reference internal" href="#tagging-your-schema">Tagging Your Schema</a></li>
<li class="toctree-l3"><a class="reference internal" href="#migrating-your-schema">Migrating Your Schema</a></li>
<li class="toctree-l3"><a class="reference internal" href="#rolling-back-your-schema">Rolling Back Your Schema</a></li>
<li class="toctree-l3"><a class="reference internal" href="#testing-migrations">Testing Migrations</a></li>
<li class="toctree-l3"><a class="reference internal" href="#preparing-a-rollback-script">Preparing A Rollback Script</a></li>
<li class="toctree-l3"><a class="reference internal" href="#generating-documentation">Generating Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#dropping-all-objects">Dropping All Objects</a></li>
<li class="toctree-l3"><a class="reference internal" href="#fast-forwarding-through-a-changeset">Fast-Forwarding Through A Changeset</a></li>
<li class="toctree-l3"><a class="reference internal" href="#support-for-adding-multiple-migration-bundles">Support For Adding Multiple Migration Bundles</a></li>
<li class="toctree-l3"><a class="reference internal" href="#more-information">More Information</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="hibernate.html">Dropwizard Hibernate</a></li>
<li class="toctree-l2"><a class="reference internal" href="auth.html">Dropwizard Authentication</a></li>
<li class="toctree-l2"><a class="reference internal" href="forms.html">Dropwizard Forms</a></li>
<li class="toctree-l2"><a class="reference internal" href="validation.html">Dropwizard Validation</a></li>
<li class="toctree-l2"><a class="reference internal" href="views.html">Dropwizard Views</a></li>
<li class="toctree-l2"><a class="reference internal" href="scala.html">Dropwizard &amp; Scala</a></li>
<li class="toctree-l2"><a class="reference internal" href="testing.html">Testing Dropwizard</a></li>
<li class="toctree-l2"><a class="reference internal" href="example.html">Dropwizard Example, Step by Step</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuration.html">Dropwizard Configuration Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="internals.html">Dropwizard Internals</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../about/javadoc.html">Javadoc</a></li>
<li class="toctree-l1"><a class="reference internal" href="../about/index.html">About Dropwizard</a></li>
<li class="toctree-l1"><a class="reference internal" href="../about/docs-index.html">Other Versions</a></li>
</ul>

                <hr/>
                <ul>
                    <li><a href="https://dropwizard.github.io/dropwizard/1.3.0">Maven Site</a></li>
                    <li><a href="https://groups.google.com/forum/#!forum/dropwizard-user">User Mailing List</a></li>
                    <li><a href="https://groups.google.com/forum/#!forum/dropwizard-dev">Developer Mailing List</a></li>
                </ul>
            </div>
            <div class="span9" id="body">
                
  <div class="section" id="dropwizard-migrations">
<span id="man-migrations"></span><h1>Dropwizard Migrations</h1>
<p class="rubric">The <code class="docutils literal"><span class="pre">dropwizard-migrations</span></code> module provides you with a wrapper for <a class="reference external" href="http://www.liquibase.org">Liquibase</a> database
refactoring.</p>
<div class="section" id="configuration">
<h2>Configuration</h2>
<p>Like <a class="reference internal" href="jdbi3.html#man-jdbi3"><span class="std std-ref">Dropwizard JDBI3</span></a>, your <a class="reference internal" href="core.html#man-core-configuration"><span class="std std-ref">configuration class</span></a> needs a
<code class="docutils literal"><span class="pre">DataSourceFactory</span></code> instance:</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ExampleConfiguration</span> <span class="kd">extends</span> <span class="n">Configuration</span> <span class="o">{</span>
    <span class="nd">@Valid</span>
    <span class="nd">@NotNull</span>
    <span class="kd">private</span> <span class="n">DataSourceFactory</span> <span class="n">database</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DataSourceFactory</span><span class="o">();</span>

    <span class="nd">@JsonProperty</span><span class="o">(</span><span class="s">&quot;database&quot;</span><span class="o">)</span>
    <span class="kd">public</span> <span class="n">DataSourceFactory</span> <span class="nf">getDataSourceFactory</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">database</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
</div>
<div class="section" id="adding-the-bundle">
<h2>Adding The Bundle</h2>
<p>Then, in your application’s <code class="docutils literal"><span class="pre">initialize</span></code> method, add a new <code class="docutils literal"><span class="pre">MigrationsBundle</span></code> subclass:</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="nd">@Override</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">initialize</span><span class="o">(</span><span class="n">Bootstrap</span><span class="o">&lt;</span><span class="n">ExampleConfiguration</span><span class="o">&gt;</span> <span class="n">bootstrap</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">bootstrap</span><span class="o">.</span><span class="na">addBundle</span><span class="o">(</span><span class="k">new</span> <span class="n">MigrationsBundle</span><span class="o">&lt;</span><span class="n">ExampleConfiguration</span><span class="o">&gt;()</span> <span class="o">{</span>
        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="n">DataSourceFactory</span> <span class="nf">getDataSourceFactory</span><span class="o">(</span><span class="n">ExampleConfiguration</span> <span class="n">configuration</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">return</span> <span class="n">configuration</span><span class="o">.</span><span class="na">getDataSourceFactory</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">});</span>
<span class="o">}</span>
</pre></div>
</div>
</div>
<div class="section" id="defining-migrations">
<h2>Defining Migrations</h2>
<p>Your database migrations are stored in your Dropwizard project, in
<code class="docutils literal"><span class="pre">src/main/resources/migrations.xml</span></code>. This file will be packaged with your application, allowing you to
run migrations using your application’s command-line interface. You can change the name of the migrations
file used by overriding the <code class="docutils literal"><span class="pre">getMigrationsFileName()</span></code> method in <code class="docutils literal"><span class="pre">MigrationsBundle</span></code>.</p>
<p>For example, to create a new <code class="docutils literal"><span class="pre">people</span></code> table, you might create an initial <code class="docutils literal"><span class="pre">migrations.xml</span></code> like
this:</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>

<span class="nt">&lt;databaseChangeLog</span>
        <span class="na">xmlns=</span><span class="s">&quot;http://www.liquibase.org/xml/ns/dbchangelog&quot;</span>
        <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
        <span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://www.liquibase.org/xml/ns/dbchangelog</span>
<span class="s">         http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.1.xsd&quot;</span><span class="nt">&gt;</span>

    <span class="nt">&lt;changeSet</span> <span class="na">id=</span><span class="s">&quot;1&quot;</span> <span class="na">author=</span><span class="s">&quot;codahale&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;createTable</span> <span class="na">tableName=</span><span class="s">&quot;people&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;column</span> <span class="na">name=</span><span class="s">&quot;id&quot;</span> <span class="na">type=</span><span class="s">&quot;bigint&quot;</span> <span class="na">autoIncrement=</span><span class="s">&quot;true&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;constraints</span> <span class="na">primaryKey=</span><span class="s">&quot;true&quot;</span> <span class="na">nullable=</span><span class="s">&quot;false&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;/column&gt;</span>
            <span class="nt">&lt;column</span> <span class="na">name=</span><span class="s">&quot;fullName&quot;</span> <span class="na">type=</span><span class="s">&quot;varchar(255)&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;constraints</span> <span class="na">nullable=</span><span class="s">&quot;false&quot;</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;/column&gt;</span>
            <span class="nt">&lt;column</span> <span class="na">name=</span><span class="s">&quot;jobTitle&quot;</span> <span class="na">type=</span><span class="s">&quot;varchar(255)&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/createTable&gt;</span>
    <span class="nt">&lt;/changeSet&gt;</span>
<span class="nt">&lt;/databaseChangeLog&gt;</span>
</pre></div>
</div>
<p>For more information on available database refactorings, check the <a class="reference external" href="http://www.liquibase.org">Liquibase</a> documentation.</p>
</div>
<div class="section" id="checking-your-database-s-state">
<h2>Checking Your Database’s State</h2>
<p>To check the state of your database, use the <code class="docutils literal"><span class="pre">db</span> <span class="pre">status</span></code> command:</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>java -jar hello-world.jar db status helloworld.yml
</pre></div>
</div>
</div>
<div class="section" id="dumping-your-schema">
<h2>Dumping Your Schema</h2>
<p>If your database already has an existing schema and you’d like to pre-seed your <code class="docutils literal"><span class="pre">migrations.xml</span></code>
document, you can run the <code class="docutils literal"><span class="pre">db</span> <span class="pre">dump</span></code> command:</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>java -jar hello-world.jar db dump helloworld.yml
</pre></div>
</div>
<p>This will output a <a class="reference external" href="http://www.liquibase.org">Liquibase</a> change log with a changeset capable of recreating your database.</p>
</div>
<div class="section" id="tagging-your-schema">
<h2>Tagging Your Schema</h2>
<p>To tag your schema at a particular point in time (e.g., to make rolling back easier), use the
<code class="docutils literal"><span class="pre">db</span> <span class="pre">tag</span></code> command:</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>java -jar hello-world.jar db tag helloworld.yml 2012-10-08-pre-user-move
</pre></div>
</div>
</div>
<div class="section" id="migrating-your-schema">
<h2>Migrating Your Schema</h2>
<p>To apply pending changesets to your database schema, run the <code class="docutils literal"><span class="pre">db</span> <span class="pre">migrate</span></code> command:</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>java -jar hello-world.jar db migrate helloworld.yml
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This will potentially make irreversible changes to your database. Always check the pending DDL
scripts by using the <code class="docutils literal"><span class="pre">--dry-run</span></code> flag first. This will output the SQL to be run to stdout.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">To apply only a specific number of pending changesets, use the <code class="docutils literal"><span class="pre">--count</span></code> flag.</p>
</div>
</div>
<div class="section" id="rolling-back-your-schema">
<h2>Rolling Back Your Schema</h2>
<p>To roll back changesets which have already been applied, run the <code class="docutils literal"><span class="pre">db</span> <span class="pre">rollback</span></code> command. You will
need to specify either a <strong>tag</strong>, a <strong>date</strong>, or a <strong>number of changesets</strong> to roll back to:</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>java -jar hello-world.jar db rollback helloworld.yml --tag 2012-10-08-pre-user-move
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This will potentially make irreversible changes to your database. Always check the pending DDL
scripts by using the <code class="docutils literal"><span class="pre">--dry-run</span></code> flag first. This will output the SQL to be run to stdout.</p>
</div>
</div>
<div class="section" id="testing-migrations">
<h2>Testing Migrations</h2>
<p>To verify that a set of pending changesets can be fully rolled back, use the <code class="docutils literal"><span class="pre">db</span> <span class="pre">test</span></code> command,
which will migrate forward, roll back to the original state, then migrate forward again:</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>java -jar hello-world.jar db test helloworld.yml
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Do not run this in production, for obvious reasons.</p>
</div>
</div>
<div class="section" id="preparing-a-rollback-script">
<h2>Preparing A Rollback Script</h2>
<p>To prepare a rollback script for pending changesets <em>before</em> they have been applied, use the
<code class="docutils literal"><span class="pre">db</span> <span class="pre">prepare-rollback</span></code> command:</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>java -jar hello-world.jar db prepare-rollback helloworld.yml
</pre></div>
</div>
<p>This will output a DDL script to stdout capable of rolling back all unapplied changesets.</p>
</div>
<div class="section" id="generating-documentation">
<h2>Generating Documentation</h2>
<p>To generate HTML documentation on the current status of the database, use the <code class="docutils literal"><span class="pre">db</span> <span class="pre">generate-docs</span></code>
command:</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>java -jar hello-world.jar db generate-docs helloworld.yml ~/db-docs/
</pre></div>
</div>
</div>
<div class="section" id="dropping-all-objects">
<h2>Dropping All Objects</h2>
<p>To drop all objects in the database, use the <code class="docutils literal"><span class="pre">db</span> <span class="pre">drop-all</span></code> command:</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>java -jar hello-world.jar db drop-all --confirm-delete-everything helloworld.yml
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">You need to specify the <code class="docutils literal"><span class="pre">--confirm-delete-everything</span></code> flag because this command <strong>deletes
everything in the database</strong>. Be sure you want to do that first.</p>
</div>
</div>
<div class="section" id="fast-forwarding-through-a-changeset">
<h2>Fast-Forwarding Through A Changeset</h2>
<p>To mark a pending changeset as applied (e.g., after having backfilled your <code class="docutils literal"><span class="pre">migrations.xml</span></code> with
<code class="docutils literal"><span class="pre">db</span> <span class="pre">dump</span></code>), use the <code class="docutils literal"><span class="pre">db</span> <span class="pre">fast-forward</span></code> command:</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>java -jar hello-world.jar db fast-forward helloworld.yml
</pre></div>
</div>
<p>This will mark the next pending changeset as applied. You can also use the <code class="docutils literal"><span class="pre">--all</span></code> flag to mark
all pending changesets as applied.</p>
</div>
<div class="section" id="support-for-adding-multiple-migration-bundles">
<h2>Support For Adding Multiple Migration Bundles</h2>
<p>Assuming migrations need to be done for two different databases, you would need to have two different data source factories:</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ExampleConfiguration</span> <span class="kd">extends</span> <span class="n">Configuration</span> <span class="o">{</span>
    <span class="nd">@Valid</span>
    <span class="nd">@NotNull</span>
    <span class="kd">private</span> <span class="n">DataSourceFactory</span> <span class="n">database1</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DataSourceFactory</span><span class="o">();</span>

    <span class="nd">@Valid</span>
    <span class="nd">@NotNull</span>
    <span class="kd">private</span> <span class="n">DataSourceFactory</span> <span class="n">database2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DataSourceFactory</span><span class="o">();</span>

    <span class="nd">@JsonProperty</span><span class="o">(</span><span class="s">&quot;database1&quot;</span><span class="o">)</span>
    <span class="kd">public</span> <span class="n">DataSourceFactory</span> <span class="nf">getDb1DataSourceFactory</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">database1</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@JsonProperty</span><span class="o">(</span><span class="s">&quot;database2&quot;</span><span class="o">)</span>
    <span class="kd">public</span> <span class="n">DataSourceFactory</span> <span class="nf">getDb2DataSourceFactory</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">database2</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>Now multiple migration bundles can be added with unique names like so:</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="nd">@Override</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">initialize</span><span class="o">(</span><span class="n">Bootstrap</span><span class="o">&lt;</span><span class="n">ExampleConfiguration</span><span class="o">&gt;</span> <span class="n">bootstrap</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">bootstrap</span><span class="o">.</span><span class="na">addBundle</span><span class="o">(</span><span class="k">new</span> <span class="n">MigrationsBundle</span><span class="o">&lt;</span><span class="n">ExampleConfiguration</span><span class="o">&gt;()</span> <span class="o">{</span>
        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="n">DataSourceFactory</span> <span class="nf">getDataSourceFactory</span><span class="o">(</span><span class="n">ExampleConfiguration</span> <span class="n">configuration</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">return</span> <span class="n">configuration</span><span class="o">.</span><span class="na">getDb1DataSourceFactory</span><span class="o">();</span>
        <span class="o">}</span>

        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="n">String</span> <span class="nf">name</span><span class="o">()</span> <span class="o">{</span>
            <span class="k">return</span> <span class="s">&quot;db1&quot;</span><span class="o">;</span>
        <span class="o">}</span>
    <span class="o">});</span>

    <span class="n">bootstrap</span><span class="o">.</span><span class="na">addBundle</span><span class="o">(</span><span class="k">new</span> <span class="n">MigrationsBundle</span><span class="o">&lt;</span><span class="n">ExampleConfiguration</span><span class="o">&gt;()</span> <span class="o">{</span>
        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="n">DataSourceFactory</span> <span class="nf">getDataSourceFactory</span><span class="o">(</span><span class="n">ExampleConfiguration</span> <span class="n">configuration</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">return</span> <span class="n">configuration</span><span class="o">.</span><span class="na">getDb2DataSourceFactory</span><span class="o">();</span>
        <span class="o">}</span>

        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="n">String</span> <span class="nf">name</span><span class="o">()</span> <span class="o">{</span>
            <span class="k">return</span> <span class="s">&quot;db2&quot;</span><span class="o">;</span>
        <span class="o">}</span>
    <span class="o">});</span>
<span class="o">}</span>
</pre></div>
</div>
<p>To migrate your schema:</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>java -jar hello-world.jar db1 migrate helloworld.yml
</pre></div>
</div>
<p>and</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>java -jar hello-world.jar db2 migrate helloworld.yml
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Whenever a name is added to a migration bundle, it becomes the command that needs to be run at the command line.
eg: To check the state of your database, use the <code class="docutils literal"><span class="pre">status</span></code> command:</p>
</div>
<div class="highlight-text"><div class="highlight"><pre><span></span>java -jar hello-world.jar db1 status helloworld.yml
</pre></div>
</div>
<p>or</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>java -jar hello-world.jar db2 status helloworld.yml
</pre></div>
</div>
<p>By default the migration bundle uses the “db” command. By overriding you can customize it to provide any name you want
and have multiple migration bundles. Wherever the “db” command was being used, this custom name can be used.</p>
<p>There will also be a need to provide different change log migration files as well. This can be done as</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>java -jar hello-world.jar db1 migrate helloworld.yml --migrations &lt;path_to_db1_migrations.xml&gt;
</pre></div>
</div>
<div class="highlight-text"><div class="highlight"><pre><span></span>java -jar hello-world.jar db2 migrate helloworld.yml --migrations &lt;path_to_db2_migrations.xml&gt;
</pre></div>
</div>
</div>
<div class="section" id="more-information">
<h2>More Information</h2>
<p>If you are using databases supporting multiple schemas like PostgreSQL, Oracle, or H2, you can use the
optional <code class="docutils literal"><span class="pre">--catalog</span></code> and <code class="docutils literal"><span class="pre">--schema</span></code> arguments to specify the database catalog and schema used for the
Liquibase commands.</p>
<p>For more information on available commands, either use the <code class="docutils literal"><span class="pre">db</span> <span class="pre">--help</span></code> command, or for more
detailed help on a specific command, use <code class="docutils literal"><span class="pre">db</span> <span class="pre">&lt;cmd&gt;</span> <span class="pre">--help</span></code>.</p>
</div>
</div>


            </div>
        </div>
        <hr/>
        <footer>
            <p style="float: left">
            &copy; Copyright 2010-2013, Coda Hale, Yammer Inc., 2014-2017 Dropwizard Team.
            Created using <a href="http://sphinx.pocoo.org/">Sphinx</a>
            1.6.5.
            </p>
            <p style="float: right">Dropwizard v1.3.0</p>
        </footer>
    </div>
</body>
</html>


